[general]
allowguest=no
allowguests=no
alwaysauthreject=yes
context=fun-default
nat={{ salt['pillar.get']('asterisk_1:sip:nat', 'force_rport,comedia') }}
qualify=yes
;tlsenable=yes
;tcpenable=yes
;tlscertfile=/etc/asterisk/keys/asterisk.pem
;tlscafile=/etc/asterisk/keys/ca.crt
;tlscipher=all
;tlsclientmethod=tlsv1
encryption=no
;insecure=port,invite
;videosupport=no
;avpf=yes
localnet={{ salt['pillar.get']('asterisk_1:sip:localnet', '172.31.36.130/24') }}
externip={{ salt['pillar.get']('asterisk_1:sip:externip', '52.24.171.253') }}
externrefresh=180
bindport={{ salt['pillar.get']('asterisk_1:sip:bindport', '5060') }}
bindaddr={{ salt['pillar.get']('asterisk_1:sip:bindaddr', '0.0.0.0') }}
;tlsbindaddr={{ salt['pillar.get']('asterisk_1:sip:bindaddr', '0.0.0.0') }}
srvlookup=yes
language=en
;limitonpeers=yes
notifyringing=yes
notifyhold=yes
rtcachefriends=yes
progressinband=never
dtmfmode=info
;canreinvite=no
;directrtpsetup=no
disallow=all
allow=g729,ulaw,alaw,opus,g723,gsm
mohsuggest = none

;callcounter=yes


; Beginning of stuff for NAT support

;outboundproxy={{ salt['pillar.get']('kamailio:network:local_address_1', '172.31.22.213') }},force;
;nat={{ salt['pillar.get']('asterisk_1:sip:nat', 'force_rport,comedia') }}
;permit=172.31.2.0/255.255.255.0

; End of stuff for NAT support


;[kamailio_1]
;type=friend
;host={{ salt['pillar.get']('kamailio_1:net:server_ip', '172.31.22.213') }}
;port=5060
;disallow=all
;allow=opus,ulaw,alaw
;context=from-internal
;canreinvite=no
;insecure=port,invite
;nat=force_rport,comedia
;qualify=yes
;directrtpsetup=no


;[out_codemachine]
;context=fun-accounts
;type=peer
;host=sip.codemachine.io
;disallow=all
;allow=ulaw,alaw
;dtmfmode=rfc2833
;qualify=yes
;insecure=port,invite
;canreinvite=yes
;port=5060

;[freeswitch_1]
;type=peer
;host={{ salt['pillar.get']('freeswitch:vars:server_ip', '') }}
;port=5080
;jbenable=no
;disallow=all
;allow=ulaw,alaw
;trustrpid=yes
;sendrpid=yes
;context=from-internal

;[fiorella_1]
;context=fun-fiorella
;type=peer
;host=voice.fiorellainsurance.com
;disallow=all
;allow=ulaw,alaw
;dtmfmode=rfc2833
;qualify=yes
;insecure=invite
;canreinvite=yes

;[out_jefe]
;context=fun-jefe
;type=peer
;host=216.238.152.11
;disallow=all
;allow=opus,ulaw,alaw
;dtmfmode=rfc2833
;qualify=yes1
;insecure=port,invite
;canreinvite=yes
;port=5060


;new ip itellum
[itellum_4]
context=from-itellum
type=peer
host=216.238.152.11
disallow=all
allow=g729,ulaw,alaw,opus,g723,gsm
dtmfmode=rfc2833
qualify=yes
insecure=invite
canreinvite=yes
port =5060



;[out_jefe_2]
;context=fun-jefe
;type=peer
;host=216.238.152.19
;disallow=all
;allow=g729,alaw,ulaw
;dtmfmode=rfc2833
;qualify=yes
;insecure=invite
;canreinvite=yes
;port=5060



;anthony
[6016]
type=friend
callerid="Code Machine <40018646>"
username=6016
host=dynamic
secret=c0d3mach1n360161
dtmfmode=rfc2833
nat=force_rport,comedia
qualify=yes
context=fun-accounts
pickupgroup=5



;-------moneystyle

[9000]
type=friend
callerid="<18558614974>"
username=9000
host=dynamic
secret=m0n3ystyl39000
dtmfmode=rfc2833
nat=force_rport,comedia
qualify=yes
context=from-itellum
pickupgroup=5
callgroup=5
mailbox=3110@VoiceMail

[9001]
type=friend
callerid="<17028293110>"
username=9001
host=dynamic
secret=m0n3ystyl39001
dtmfmode=rfc2833
nat=force_rport,comedia
qualify=yes
context=from-itellum
pickupgroup=5
callgroup=5
mailbox=3110@VoiceMail

[9002]
type=friend
callerid="<13476073955>"
username=9002
host=dynamic
secret=m0n3ystyl39002
dtmfmode=rfc2833
nat=force_rport,comedia
qualify=yes
context=from-itellum
pickupgroup=5
mailbox=3110@VoiceMail

[9003]
type=friend
callerid="<13057021681>"
username=9003
host=dynamic
secret=m0n3ystyl39003
dtmfmode=rfc2833
nat=force_rport,comedia
qualify=yes
context=from-itellum
pickupgroup=5
callgroup=5
mailbox=1681@VoiceMail

[9004]
type=friend
callerid="<12028188660>"
username=9004
host=dynamic
secret=m0n3ystyl39004
dtmfmode=rfc2833
nat=force_rport,comedia
qualify=yes
context=from-itellum
pickupgroup=5
callgroup=5
mailbox=8660@VoiceMail

[9005]
type=friend
callerid="<12028188660>"
username=9005
host=dynamic
secret=m0n3ystyl39005
dtmfmode=rfc2833
nat=force_rport,comedia
qualify=yes
context=from-itellum
pickupgroup=5
callgroup=5
mailbox=8660@VoiceMail

[9006]
type=friend
callerid="<12028188660>"
username=9006
host=dynamic
secret=m0n3ystyl39006
dtmfmode=rfc2833
nat=force_rport,comedia
qualify=yes
context=from-itellum
pickupgroup=5
callgroup=5
mailbox=8660@VoiceMail

[9007]
type=friend
callerid="<12028188660>"
username=9007
host=dynamic
secret=m0n3ystyl39007
dtmfmode=rfc2833
nat=force_rport,comedia
qualify=yes
context=from-itellum
pickupgroup=5
mailbox=8660@VoiceMail

[9008]
type=friend
callerid="<12028188660>"
username=9008
host=dynamic
secret=m0n3ystyl39008
dtmfmode=rfc2833
nat=force_rport,comedia
qualify=yes
context=from-itellum
pickupgroup=5
callgroup=5
mailbox=8660@VoiceMail

[9009]
type=friend
callerid="<12028188660>"
username=9009
host=dynamic
secret=m0n3ystyl39009
dtmfmode=rfc2833
nat=force_rport,comedia
qualify=yes
context=from-itellum
pickupgroup=5
callgroup=5
mailbox=8660@VoiceMail

; adicionales por si se necesita
[9010]
type=friend
callerid="<12028188660>"
username=9010
host=dynamic
secret=m0n3ystyl39010
dtmfmode=rfc2833
nat=force_rport,comedia
qualify=yes
context=from-itellum
pickupgroup=5
callgroup=5

[9011]
type=friend
callerid="<12028188660>"
username=9011
host=dynamic
secret=m0n3ystyl39011
dtmfmode=rfc2833
nat=force_rport,comedia
qualify=yes
context=from-itellum
pickupgroup=5
callgroup=5


[9050]
type=friend
callerid="<12126340518>"
username=9050
host=dynamic
secret=r1card0p3ralta9050
dtmfmode=rfc2833
nat=force_rport,comedia
qualify=yes
context=fun-peralta
pickupgroup=5
callgroup=5

[9051]
type=friend
callerid="<12126340518>"
username=9051
host=dynamic
secret=r1card0p3ralta9051
dtmfmode=rfc2833
nat=force_rport,comedia
qualify=yes
context=fun-peralta
pickupgroup=5
callgroup=5

[9052]
type=friend
callerid="<12126340518>"
username=9052
host=dynamic
secret=r1card0p3ralta9052
dtmfmode=rfc2833
nat=force_rport,comedia
qualify=yes
context=fun-peralta
pickupgroup=5
callgroup=5

