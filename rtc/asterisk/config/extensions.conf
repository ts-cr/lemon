[general]
static=yes
writeprotect=no
extenpatternmatchnew=no
clearglobalvars=no
autofallthrough=no


[globals]
CONSOLE = Console/dsp
IOFUN = SIP/iofun
G_OUT = SIP/godzilla_out
CRC_OUT = SIP/rurbano_1


[from-iofun]
include = default


[from-internal]
include = fun-accounts


[fun-default]
; Monkey business
exten = s,1,Dial(Local/2020@fun-default)

exten = _X!,1,Dial(Local/500@default)






[from-itellum]


;-----------incoming CALLS lua-----------------------------
;exten = _18558614973,1,Dial(Local/40018646@codemachine_main_usa)


;------------out call--------------------------------
exten = _1XXXXXXXXXX,1,Dial(SIP/itellum_4/002041${EXTEN},45,Tt)
  same = n,Hangup()

exten = _XXXX,1,Answer()
  same = n,Wait(0.1)
  same = n,Dial(SIP/${EXTEN},45,Tt)
  same = n,Hangup()


  ;-----------------voicemail-----------------------


exten => _3110,1,VoiceMailMain(3110@VoiceMail)
exten => _8660,1,VoiceMailMain(8660@VoiceMail)
exten => _1681,1,VoiceMailMain(1681@VoiceMail)
exten => _4974,1,VoiceMailMain(4974@VoiceMail)

;----------tools-----------------------------------------
exten => _888XXXXXXXXXXX,1,Chanspy('all',wq)
  same = n,Hangup()

exten => _88XXXXXXXXXXX,1,Chanspy(SIP/${EXTEN:2},qrX)
exten => 8888,1,Chanspy('all',qrX)

;exten => _88XXXX,1,Chanspy(SIP/${EXTEN:2},wq)
;exten => 8888,1,Chanspy('all',wqb)
;----------------------------------------------------------


;--------------moneystyle----------------------


exten = _12028188660,1,Answer()
  same = n,Wait(0.1)
  same = n,Queue(q_moneys)
  same = n,VoiceMail(8660@VoiceMail)
  same = n,Hangup()


exten = _17028293110,1,Answer()
  same = n,Wait(0.1)
  same = n,Dial(sip/9001,45,Tt)
  same = n,VoiceMail(3110@VoiceMail)
  same = n,Hangup()

exten = _18558614974,1,Answer()
  same = n,Wait(0.1)
  same = n,Dial(sip/9000,45,Tt)
  same = n,VoiceMail(4974@VoiceMail)
  same = n,Hangup()

exten = _13057021681,1,Answer()
  same = n,Wait(0.3)
  same = n,Dial(sip/9003,45,Tt)
  same = n,VoiceMail(1681@VoiceMail)
  same = n,Hangup()


;exten = _12028188659,1,Dial(Local/_12028188659@fun-code-lua)









[default]
; system default

exten = 500,1,Answer()
  same = n,Wait(0.1)
  same = n,Playback(tt-monkeys)
  same = n,Hangup()


;[fun-godzilla]

;exten = 1001,1,Dial(SIP/idt_3/7458218446461633,60)
;  same = n,Hangup()

;exten = 1002,1,Dial(SIP/idt_3/7458219492025180,60)
;  same = n,Hangup() 


;[fun-accounts]

;exten = s,1,Dial(Local/500@default)
;  same = n,Hangup()

;exten = _X!,1,Dial(Local/500@default)
;  same = n,Hangup()

;exten = _1XXXXXXXXXX,1,Dial(SIP/out_codemachine/${EXTEN},45,Tt)
;  same = n,Hangup()

;exten = _506XXXXXXXX,1,Dial(SIP/out_codemachine/${EXTEN},45,Tt)
;  same = n,Hangup()

;exten = _58XXXXXXXXXX,1,Dial(SIP/out_codemachine/${EXTEN},45,Tt)
;  same = n,Hangup()

;exten = _XXXX,1,Dial(SIP/${EXTEN},45,Tt)
;  same = n,Hangup

;exten = _XXXX,1,Dial(SIP/out_codemachine/${EXTEN},45,Tt)
;  same = n,Hangup()

;exten = _X!,1,Dial(Local(${EXTEN}@fun-accounts))


;exten => h,1,Set(response=${CURL(http://iofun.io/calls/completed/,call_id=${UNIQUEID}&account_uuid=${account_uuid}&keyword=${keyword}&duration=${CDR(billsec)}&first_name=${first_name}&last_name=${last_name}&phone_number=${phone_number})})
;  same = n,Noop(${response})


[iofun]
; IO FUN default
; # hash://

exten = _iofunX!,1,Wait(0.1)
  same = n,Dial(${IOFUN}/${EXTEN})

exten = _hashX!,1,Wait(0.001)
  same = n,Dial(${IOFUN}/{EXTEN})



[ivr_monkeys]
exten = s,1,Answer()
  same = n,Background(tt-monkeysintro)
  same = n,Wait(0.5)
  same = n,Background(tt-monkeys)
  same = n,Hangup()





[fun-sparta]

;exten = _18553964982,1,Answer()
;  same = n,Wait(0.1)
;  same = n,Queue(q_cory)
;  same = n,Hangup()

;se usa encaso de preuba para vereficar si funciona la troncal 
; uniendo codemachine con sparta

;exten = _7777,1,Answer()
;  same = n,Wait(0.1)
;  same = n,Queue(q_chuma)
;  same = n,Hangup()

exten = s,1,Dial(Local/500@default)
  same = n,Hangup()

exten = _X!,1,Dial(Local/500@default)
  same = n,Hangup()

exten = _XXX,1,Dial(SIP/fiorella_1/${EXTEN},45)
  same = n,Hangup()

;exten = _XX,1,Dial(SIP/fiorella_1/${EXTEN},45)
;  same = n,Hangup()

exten = _XXXXXXXXXX,1,Dial(SIP/fiorella_1/${EXTEN},45)
  same = n,Hangup()
;vereficar
;exten = _2001,1,Answer()
;  same = n,Queue(fiorella)

;exten = _XXXX,1,Dial(SIP/fiorella_1/${EXTEN},45)
;  same = n,Hangup()

;exten = _XXXX,1,Answer()
;  same = n,Wait(0.1)
;  same = n,Dial(SIP/${EXTEN},45)
;  same = n,Hangup()


;exten = _XXXXXXXXX,1,Answer()
;  same = n,Wait(0.1)
;  same = n,Dial(SIP/${EXTEN},45)
;  same = n,Hangup()

;exten = _XXXX,1,Answer()
;  same = n,Wait(0.1)
;  same = n,Dial(SIP/${EXTEN},45)
;  same = n,Hangup()


  exten => h,1,Set(response=${CURL(http://iofun.io/calls/completed/,call_id=${UNIQUEID}&account_uuid=${account_uuid}&keyword=${keyword}&duration=${CDR(billsec)}&first_name=${first_name}&last_name=${last_name}&phone_number=${phone_number})})
    same = n,Noop(${response})



    

